<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>ACADEMIA CAPGEMINI</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>
<body>
    <div>
        <h3>DESAFIO DE PROGRAMAÇÃO 02 - ACADEMIA CAPGEMINI</h3>
    </div>

    <hr>
    <div class="desafio01">
        <h5># Questão 01</h5>

        <label for="text01">Lista separada por virgula arr = [</label>
            <input type="text" name="text01" id="text01">
        <label for="text01">]</label>
        <button onclick="mediana();">Calcular Mediana</button>
        
        <div>
            <br>
            <label for="text01">Mediana</label>
            <textarea disabled name="resultText01" id="resultText01" cols="35" rows="1"></textarea>

        </div>
    </div>

    <hr>
    <div class="desafio02">
        <h5># Questão 02</h5>

        <label for="text01">Lista separada por virgula n = [</label>
            <input type="text" name="text02" id="text02">
        <label for="text02">]</label>
        <button onclick="pares();">Calcular Número de pares</button>
        
        <div>
            <label for="number02">Valor Comparação</label>
            <input type="number" name="number02" id="number02">
        </div>

        <div>
            <br>
            <label for="text02">Número de pares</label>
            <textarea disabled name="resultText02" id="resultText02" cols="35" rows="1"></textarea>

        </div>
    </div>

    <hr>
    <div class="desafio03">
        <h5># Questão 03</h5>

        <label for="text03">Texto a ser encriptado</label>
        <input type="text" name="text03" id="text03">
        <button onclick="encriparTexto();">Encriptar</button>
        
        <div>
            <br>
            <label for="text03">Texto encriptado</label>
            <textarea disabled name="resultText03" id="resultText03" cols="35" rows="1"></textarea>
        </div>

    </div>

    <script>

        var test = "";

        function mediana(){
            
            let typedText = document.getElementById("text01").value.replaceAll(" ", "");
            
            let values = typedText.split(",");
            let integerValues = converterToInteger(values);

            if( integerValues.length % 2 == 0 ){

                document.getElementById("resultText01").value = "Número de elementos deve ser impar";

            }else{

                let valuesOrder = integerValues.sort( (a,b) => a - b );
                let posicaoMediana = Math.trunc( valuesOrder.length / 2 );
                test = valuesOrder;
                document.getElementById("resultText01").value = "Mediana é " + valuesOrder[ posicaoMediana ];

            }

        }

        function pares(){

            let typedText = document.getElementById("text02").value.replaceAll(" ", "");
            
            let values = typedText.split(",");
            let integerValues = converterToInteger(values);
            let valDiff = parseInt( document.getElementById("number02").value );
            let pares = 0;

            for( let i=0; integerValues.length > i; i++ ){

                for( let j=i+1; integerValues.length > j; j++ ){

                    if( converterNegativo( integerValues[j] - integerValues[i] ) == valDiff ){

                        pares++;

                    }

                }

            }
            
            document.getElementById("resultText02").value = " " + pares;

            function converterNegativo(a){

                if (a < 0) {
                    a = a * -1;
                }

                return a;
            }

        }

        function encriparTexto(){

            let typedText = document.getElementById("text03").value;
            let textNoSpace = typedText.replaceAll(" ", "");
            let root = Math.round( Math.sqrt( textNoSpace.length ) );
            let linhas = [];
            textEncrypto = "";

            for (let v1=0; textNoSpace.length > v1; v1++){
                
                let inserted = false;

                for(let v2=0; root > v2; v2++){

                    if( (!inserted) && (linhas[v2]) && ( linhas[v2].length < root ) ){

                        linhas[v2] += textNoSpace[v1];
                        inserted = true;

                    }else if( (!inserted) && (!linhas[v2]) ){

                        linhas[v2] = textNoSpace[v1];
                        inserted = true;
                    }

                }

            }

            for (let v1=0; linhas.length > v1; v1++){

                for(let v2=0; root > v2; v2++){

                    if( linhas[v2][v1] ){
                        textEncrypto += linhas[v2][v1];
                    }

                }

                if( textEncrypto.length < typedText.length ){

                    textEncrypto += " ";
                }

            }
            test = linhas;
            document.getElementById("resultText03").value = textEncrypto;
            
        }

        function converterToInteger(values){

            let listInteger = [];

            for(let l=0; values.length > l; l++ ){
                
                if(Number.isInteger( parseInt(values[l]) ) ){

                    listInteger.push( parseInt(values[l]) );
                }

            }

            return listInteger;

        }

    </script>

</body>
</html>